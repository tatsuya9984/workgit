<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8"/>
    <title>sign up</title>
    <link href="/css/main.css" th:href="@{/css/main.css}" rel="stylesheet"></link>
  </head>
  <body>
  	<header id="header">
  		タイトル
  	</header>
  	<div id="main-container">
  		<div id="main-content">
  			<form method="post">
  				<table class="form_table">
  					<tr>
  						<td>ID</td>
  						<td><input type="text" name="user_id"></td>
  					</tr>
  					<tr>
  						<td>PASSWORD</td>
  						<td><input id="password" class="" type="password" name="password"></td>
  					</tr>
  					<tr>
  						<td>PASSWORD確認用</td>
  						<td><input id="re-password" class="" type="password" name="re_password" onInput="checkPassword()"></td>
  						<td id=passwordError class="non-display">パスワードが一致しません</td>
  					</tr>
  					<tr>
  						<td>姓</td>
  						<td><input type="text" name="family_name"></td>
  					</tr>
  					<tr>
  						<td>名</td>
  						<td><input type="text" name="given_name"></td>
  					</tr>
  					<tr>
  						<td>Email</td>
  						<td><input type="text" name="mail_address"></td>
  					</tr>
  					<tr>
  						<td colspan="2" ><input id=sendable_flag value="true" type="radio" name="sendable_flag" checked="checked" onClick="changeRadioStatus(this)">メール配信を希望します</td>
  					</tr>
  					<tr th::if="${errorMsg != null}">
  						<td colspan="2" align="center" th:if="${errorMsg != null}"><span th:text="${errorMsg}"></span></td>
  					</tr>
  					<tr>
  						<td colspan="2" align="center"><input id="submit" type="submit" value="Sign Up"></td>
  					</tr>
  				</table>
  			</form>
  		</div>
  	</div>
  	
  	<script type="text/javascript">
  		var passwordElement = document.getElementById("password");
		var rePasswordElement = document.getElementById("re-password");
		var passwordError = document.getElementById("passwordError");
  		var checkPassword = function() {
  			var password = passwordElement.value;
  			var rePassword = rePasswordElement.value;
  			if (password == rePassword) {
  				passwordElement.classList.add('input-ok');
  				rePasswordElement.classList.add('input-ok');
  				passwordElement.classList.remove('input-ng');
  				rePasswordElement.classList.remove('input-ng');
  				passwordError.classList.add('non-display');
  			} else {
  				passwordElement.classList.add('input-ng');
  				rePasswordElement.classList.add('input-ng');
  				passwordElement.classList.remove('input-ok');
  				rePasswordElement.classList.remove('input-ok');
  				passwordError.classList.remove('non-display');
  			}
  		};
  		var radioStatus = true;
  		var changeRadioStatus = function(element) {
  			console.log("radio");
  			if (radioStatus == true) {
  				element.checked = false;
  				radioStatus = false;
  				element.value = "false";
  			} else {
  				element.checked = true;
  				radioStatus = true;
  				element.value = "true";
  			}
  		}
  	</script>
  </body>
</html>